# LePetPal Backend Configuration
# Copy this file to .env and customize for your deployment

# ============================================================================
# Server Configuration
# ============================================================================

# Port for the Flask REST API server
PORT=5000

# Host address (0.0.0.0 allows external connections, 127.0.0.1 for localhost only)
HOST=0.0.0.0


# ============================================================================
# Camera Configuration
# ============================================================================

# Camera device index (0 for default camera, 1+ for additional cameras)
CAMERA_INDEX=0

# Video stream resolution
STREAM_WIDTH=1280
STREAM_HEIGHT=720

# Target frames per second for video streaming (15+ recommended)
STREAM_FPS=15


# ============================================================================
# Detection and Vision Model Configuration
# ============================================================================

# Minimum confidence threshold for object detection (0.0 - 1.0)
# Lower values = more detections but less accurate
# Higher values = fewer detections but more accurate
CONFIDENCE_THRESHOLD=0.7

# Maximum time to wait for successful detection before failing (milliseconds)
DETECTION_TIMEOUT_MS=10000


# ============================================================================
# Hardware Configuration
# ============================================================================

# Use mock hardware adapters for development without physical hardware
# Set to 'false' when deploying with real hardware
USE_MOCK_HARDWARE=true

# GPIO pin number for servo controller (BCM numbering)
SERVO_PIN=18

# Default duration for treat dispensing (milliseconds)
SERVO_DISPENSE_DURATION_MS=1000


# ============================================================================
# Safety Configuration
# ============================================================================

# Safety margin for joint angle limits (radians)
# Prevents arm from reaching absolute joint limits
JOINT_LIMIT_MARGIN=0.1

# Maximum time allowed for Go Home command to complete (milliseconds)
# Command will fail if this timeout is exceeded
GO_HOME_TIMEOUT_MS=1000


# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (relative to backend directory)
LOG_FILE=lepetpal.log


# ============================================================================
# Security Configuration (Optional)
# ============================================================================

# API authentication token (optional)
# If set, clients must include X-LePetPal-Token header with this value
# Leave empty to disable authentication (suitable for LAN deployment)
API_TOKEN=

# CORS allowed origins (comma-separated)
# Use '*' to allow all origins (development only)
# For production, specify exact origins: http://192.168.1.50:3000,http://localhost:3000
CORS_ORIGINS=*


# ============================================================================
# Advanced Configuration (Optional)
# ============================================================================

# Command execution timeout (milliseconds)
# Maximum time allowed for a command to complete
COMMAND_TIMEOUT_MS=30000

# Maximum number of detection retry attempts
MAX_DETECTION_RETRIES=2

# Per-phase timeouts (milliseconds)
DETECT_PHASE_TIMEOUT_MS=10000
APPROACH_PHASE_TIMEOUT_MS=5000
GRASP_PHASE_TIMEOUT_MS=5000
LIFT_PHASE_TIMEOUT_MS=5000
DROP_PHASE_TIMEOUT_MS=5000

# Vision model configuration
MODEL_PATH=models/yolov8n.pt
MODEL_DEVICE=cpu  # Options: cpu, cuda, mps

# Calibration file path
CALIBRATION_FILE=calibration.json
